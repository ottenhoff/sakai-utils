<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_147-icedtea) on Thu Mar 08 14:25:40 EST 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>SimpleDiff (Sakai base pom 2.10-SNAPSHOT API)</title>
<meta name="date" content="2012-03-08">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SimpleDiff (Sakai base pom 2.10-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SimpleDiff.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/commons/jrcs/diff/RevisionVisitor.html" title="interface in org.apache.commons.jrcs.diff"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/commons/jrcs/diff/SimpleDiff.html" target="_top">Frames</a></li>
<li><a href="SimpleDiff.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.commons.jrcs.diff</div>
<h2 title="Class SimpleDiff" class="title">Class SimpleDiff</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.commons.jrcs.diff.SimpleDiff</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../org/apache/commons/jrcs/diff/DiffAlgorithm.html" title="interface in org.apache.commons.jrcs.diff">DiffAlgorithm</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">SimpleDiff</span>
extends <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../org/apache/commons/jrcs/diff/DiffAlgorithm.html" title="interface in org.apache.commons.jrcs.diff">DiffAlgorithm</a></pre>
<div class="block">Implements a simple differencing algortithm.
 <p></div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Revision: 84222 $</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:juanco@suigeneris.org">Juanco Anez</a>
         <p>
         <b>Overview of Algorithm</b>
         </p>
         <p>
         <i>by <a href='http://www.topmeadow.net/bwm'> bwm</a>
         </p>
         <p>
         The algorithm is optimised for situations where the input sequences
         have few repeated objects. If it is given input with many repeated
         objects it will report sub-optimal changes. However, given
         appropriate input, it is fast, and linear in memory usage.
         </p>
         <p>
         The algorithm consists of the following steps:
         </p>
         <ul>
         <li>compute an equivalence set for the input data</li>
         <li>translate each element of the orginal and revised input
         sequences to a member of the equivalence set </li>
         <li>match the the input sequences to determine the deltas, i.e. the
         differences between the original and revised sequences.</li>
         </ul>
         <p>
         The first step is to compute a an equivalence set for the input data.
         The equivalence set is computed from objects that are in the original
         input sequence
         </p>
 
 <pre>
     eq(x) = the index of the first occurence of x in the original sequence.
 </pre>
 
 <p>
         With this equivalence function, the algorithm can compare integers
         rather than strings, which is considerably more efficient.
         </p>
         <p>
         The second step is to compute the datastructure on which the
         algorithm will operate. Having computed the equivalence function in
         the previous step, we can compute two arrays where indx[i] =
         eqs(orig[i]) and jndx[i] = eqs(rev[i]). The algorithm can now operate
         on indx and jndx instead of orig and rev. Thus, comparisons are then
         on O(int == int) instead of O(Object.equals(Object)).
         </p>
         <p>
         The algorithm now matches indx and jndx. Whilst indx[i] == jndx[i] it
         skips matching objects in the sequence. In seeking to match objects
         in the input sequence it assumes that each object is likely to be
         unique. It uses the known characteristics of the unique equivalence
         function. It can tell from the eq value if this object appeared in
         the other sequence at all. If it did not, there is no point in
         searching for a match.
         </p>
         <p>
         Recall that the eq function value is the index earliest occurrence in
         the orig sequence. This information is used to search efficiently for
         the next match. The algorithm is perfect when all input objects are
         unique, but degrades when input objects are not unique. When input
         objects are not unique an optimal match may not be found, but a
         correct match will be.
         </p>
         <p>
         Having identified common matching objects in the orig and revised
         sequences, the differences between them are easily computed.
         </p></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/commons/jrcs/diff/Delta.html" title="class in org.apache.commons.jrcs.diff"><code>Delta</code></a>, 
<a href="../../../../../org/apache/commons/jrcs/diff/Revision.html" title="class in org.apache.commons.jrcs.diff"><code>Modifications: 27/Apr/2003 bwm Added some comments whilst
      trying to figure out the algorithm 03 May 2003 bwm Created this
      implementation class by refactoring it out of the Diff class to enable
      plug in difference algorithms</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/commons/jrcs/diff/SimpleDiff.html#SimpleDiff()">SimpleDiff</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/commons/jrcs/diff/SimpleDiff.html#buildEqSet(java.lang.Object[], java.lang.Object[])">buildEqSet</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;orig,
          <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;rev)</code>
<div class="block">create a <code>Map</code> from each common item in orig and rev to the
 index of its first occurrence in orig</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/commons/jrcs/diff/SimpleDiff.html#buildIndex(java.util.Map, java.lang.Object[], int)">buildIndex</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&nbsp;eqs,
          <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;seq,
          int&nbsp;NF)</code>
<div class="block">build a an array such each a[i] = eqs([i]) or NF if eqs([i]) undefined</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/commons/jrcs/diff/Revision.html" title="class in org.apache.commons.jrcs.diff">Revision</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/commons/jrcs/diff/SimpleDiff.html#diff(java.lang.Object[], java.lang.Object[])">diff</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;orig,
    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;rev)</code>
<div class="block">Compute the difference between original and revised sequences.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/commons/jrcs/diff/SimpleDiff.html#scan(int[], int, int)">scan</a></strong>(int[]&nbsp;ndx,
    int&nbsp;i,
    int&nbsp;target)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SimpleDiff()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SimpleDiff</h4>
<pre>public&nbsp;SimpleDiff()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="scan(int[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scan</h4>
<pre>protected&nbsp;int&nbsp;scan(int[]&nbsp;ndx,
       int&nbsp;i,
       int&nbsp;target)</pre>
</li>
</ul>
<a name="diff(java.lang.Object[], java.lang.Object[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>diff</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/commons/jrcs/diff/Revision.html" title="class in org.apache.commons.jrcs.diff">Revision</a>&nbsp;diff(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;orig,
            <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;rev)
              throws <a href="../../../../../org/apache/commons/jrcs/diff/DifferentiationFailedException.html" title="class in org.apache.commons.jrcs.diff">DifferentiationFailedException</a></pre>
<div class="block">Compute the difference between original and revised sequences.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/commons/jrcs/diff/DiffAlgorithm.html#diff(java.lang.Object[], java.lang.Object[])">diff</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/commons/jrcs/diff/DiffAlgorithm.html" title="interface in org.apache.commons.jrcs.diff">DiffAlgorithm</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>orig</code> - The original sequence.</dd><dd><code>rev</code> - The revised sequence to be compared with the original.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A Revision object describing the differences.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>DifferenciationFailedException</code> - if the diff could not be computed.</dd>
<dd><code><a href="../../../../../org/apache/commons/jrcs/diff/DifferentiationFailedException.html" title="class in org.apache.commons.jrcs.diff">DifferentiationFailedException</a></code> - if the diff could not be computed.</dd></dl>
</li>
</ul>
<a name="buildEqSet(java.lang.Object[], java.lang.Object[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildEqSet</h4>
<pre>protected&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&nbsp;buildEqSet(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;orig,
             <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;rev)</pre>
<div class="block">create a <code>Map</code> from each common item in orig and rev to the
 index of its first occurrence in orig</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>orig</code> - the original sequence of items</dd><dd><code>rev</code> - the revised sequence of items</dd></dl>
</li>
</ul>
<a name="buildIndex(java.util.Map, java.lang.Object[], int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>buildIndex</h4>
<pre>protected&nbsp;int[]&nbsp;buildIndex(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&nbsp;eqs,
               <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;seq,
               int&nbsp;NF)</pre>
<div class="block">build a an array such each a[i] = eqs([i]) or NF if eqs([i]) undefined</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>eqs</code> - a mapping from Object to Integer</dd><dd><code>seq</code> - a sequence of objects</dd><dd><code>NF</code> - the not found marker</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SimpleDiff.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/commons/jrcs/diff/RevisionVisitor.html" title="interface in org.apache.commons.jrcs.diff"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/commons/jrcs/diff/SimpleDiff.html" target="_top">Frames</a></li>
<li><a href="SimpleDiff.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2003-2012 <a href="http://www.sakaiproject.org/">The Sakai Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
